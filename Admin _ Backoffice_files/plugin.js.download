CKEDITOR.plugins.add("kituploadfile",{requires:"uploadwidget,link",init:function(e){if(e.on("dialogShow",(function(e){"image2"==e.data.getName()&&$("#label")&&$(".cke_dialog_ui_file label").html(I18n.t("global.less_than",{weight:"50 MB"}))})),CKEDITOR.plugins.clipboard.isFileApiSupported){var l=CKEDITOR.fileTools,i=l.getUploadUrl(e.config),t=CKEDITOR.plugins.kitattachment;i?l.addUploadWidget(e,"kituploadfile",{uploadUrl:l.getUploadUrl(e.config),fileToElement:function(e){var l=new CKEDITOR.dom.element("a");return l.setText(e.name),l.setAttribute("href","#"),l},onUploaded:function(l){this.replaceWith('<a href="'+l.url+'" target="_blank">'+l.fileName+"</a>");var i=JSON.parse(l.xhr.response);t.showAttachement(e,i)}}):CKEDITOR.error("uploadfile-config")}}});